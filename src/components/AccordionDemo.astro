---
// Demo component for the accordion pattern
---

<div style="border: 2px solid #ccc; padding: 1.5rem; margin: 2rem 0; border-radius: 8px; background: #f9f9f9;">
  <h2 style="margin-top: 0; font-size: 1.25rem;">Frequently Asked Questions</h2>

  <div class="accordion-demo">

    <h3 style="margin: 1rem 0 0.5rem 0; font-size: 1.1rem;">
      <button
        id="acc-btn-1"
        aria-expanded="true"
        aria-controls="acc-panel-1"
        style="width: 100%; text-align: left; padding: 0.75rem 1rem; font-size: 1rem; cursor: pointer; background: #0066cc; color: white; border: none; border-radius: 4px; font-weight: bold;">
        What is semantic HTML?
      </button>
    </h3>
    <div
      id="acc-panel-1"
      role="region"
      aria-labelledby="acc-btn-1"
      style="padding: 1rem; background: white; border-radius: 4px; border: 1px solid #ddd; margin-bottom: 1rem;">
      <p style="margin: 0;">Semantic HTML means using HTML tags for their meaning, not their appearance. For example, using &lt;nav&gt; for navigation and &lt;article&gt; for article content.</p>
    </div>

    <h3 style="margin: 1rem 0 0.5rem 0; font-size: 1.1rem;">
      <button
        id="acc-btn-2"
        aria-expanded="false"
        aria-controls="acc-panel-2"
        style="width: 100%; text-align: left; padding: 0.75rem 1rem; font-size: 1rem; cursor: pointer; background: #0066cc; color: white; border: none; border-radius: 4px; font-weight: bold;">
        What is the first rule of ARIA?
      </button>
    </h3>
    <div
      id="acc-panel-2"
      role="region"
      aria-labelledby="acc-btn-2"
      hidden
      style="padding: 1rem; background: white; border-radius: 4px; border: 1px solid #ddd; margin-bottom: 1rem;">
      <p style="margin: 0;">The first rule of ARIA is: don't use ARIA. If a native HTML element exists, use it instead.</p>
    </div>

    <h3 style="margin: 1rem 0 0.5rem 0; font-size: 1.1rem;">
      <button
        id="acc-btn-3"
        aria-expanded="false"
        aria-controls="acc-panel-3"
        style="width: 100%; text-align: left; padding: 0.75rem 1rem; font-size: 1rem; cursor: pointer; background: #0066cc; color: white; border: none; border-radius: 4px; font-weight: bold;">
        What is a Disclosure?
      </button>
    </h3>
    <div
      id="acc-panel-3"
      role="region"
      aria-labelledby="acc-btn-3"
      hidden
      style="padding: 1rem; background: white; border-radius: 4px; border: 1px solid #ddd; margin-bottom: 1rem;">
      <p style="margin: 0;">A disclosure is a simple widget that shows or hides content, like a "Read More" button.</p>
    </div>

  </div>
</div>

<script>
  // Get all accordion buttons
  const allAccordionButtons = document.querySelectorAll('.accordion-demo button');

  // Click handler
  allAccordionButtons.forEach(button => {
    button.addEventListener('click', () => {
      
      // Check if the panel is already expanded
      const isExpanded = button.getAttribute('aria-expanded') === 'true';
      
      // First, close ALL panels
      allAccordionButtons.forEach(btn => {
        btn.setAttribute('aria-expanded', 'false');
        const panel = document.getElementById(btn.getAttribute('aria-controls'));
        panel.hidden = true;
      });

      // Now, if the clicked panel was closed, open it
      if (!isExpanded) {
        button.setAttribute('aria-expanded', 'true');
        const panel = document.getElementById(button.getAttribute('aria-controls'));
        panel.hidden = false;
      }
      
    });
  });

  // Keyboard navigation
  const buttons = document.querySelectorAll('.accordion-demo button');
  const accordionButtons = Array.from(buttons);

  accordionButtons.forEach((button, index) => {
    button.addEventListener('keydown', (e) => {
      
      switch (e.key) {
        case 'ArrowDown':
          e.preventDefault();
          const nextIndex = (index + 1) % accordionButtons.length;
          accordionButtons[nextIndex].focus();
          break;
          
        case 'ArrowUp':
          e.preventDefault();
          const prevIndex = (index - 1 + accordionButtons.length) % accordionButtons.length;
          accordionButtons[prevIndex].focus();
          break;
          
        case 'Home':
          e.preventDefault();
          accordionButtons[0].focus();
          break;
          
        case 'End':
          e.preventDefault();
          accordionButtons[accordionButtons.length - 1].focus();
          break;
      }
    });
  });
</script>
